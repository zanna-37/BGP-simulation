/** @preserve jsPDF 0.9.0rc2 ( ${buildDate} ${commitID} )
Copyright (c) 2010-2012 James Hall, james@snapshotmedia.co.uk, https://github.com/MrRio/jsPDF
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
MIT license.
*/

/*
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
var jsPDF=function(){function n(r,u,f,e){r=typeof r=="undefined"?"p":r.toString().toLowerCase();typeof u=="undefined"&&(u="mm");typeof f=="undefined"&&(f="a4");typeof e=="undefined"&&typeof zpipe=="undefined"&&(e=!1);var at=f.toString().toLowerCase(),ei="0.9.0rc2",vt=[],it=0,oi=e,si="1.3",yt={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]},pt="0 g",hi="0 G",nt=0,rt=[],w=2,ht=!1,ut=[],a={},d={},ft=16,p,ci=.200025,gt=1.15,c,b,s,y={title:"",subject:"",author:"",keywords:"",creator:""},wt=0,bt=0,l={},k=new i(l),ct,et,h=function(n){return n.toFixed(2)},v=function(n){return n.toFixed(3)},ot=function(n){var t=n.toFixed(0);return n<10?"0"+t:t},li=function(n){var t=n.toFixed(0);return t.length<10?new Array(11-t.length).join("0")+t:t},o=function(n){ht?rt[nt].push(n):(vt.push(n),it+=n.length+1)},tt=function(){return w++,ut[w]=it,o(w+" 0 obj"),w},ni=function(n){o("stream");o(n);o("endstream")},ti,ii,kt,ai=function(){ti=b*s;ii=c*s;for(var t,i,n,f,r,u=1;u<=nt;u++){if(tt(),o("<<\/Type /Page"),o("/Parent 1 0 R"),o("/Resources 2 0 R"),o("/Contents "+(w+1)+" 0 R>>"),o("endobj"),t=rt[u].join("\n"),tt(),oi){for(i=[],n=0;n<t.length;++n)i[n]=t.charCodeAt(n);r=adler32cs.from(t);f=new Deflater(6);f.append(new Uint8Array(i));t=f.flush();i=[new Uint8Array([120,156]),new Uint8Array(t),new Uint8Array([r&255,r>>8&255,r>>16&255,r>>24&255])];t="";for(n in i)i.hasOwnProperty(n)&&(t+=String.fromCharCode.apply(null,i[n]));o("<<\/Length "+t.length+" /Filter [/FlateDecode]>>")}else o("<<\/Length "+t.length+">>");ni(t);o("endobj")}for(ut[1]=it,o("1 0 obj"),o("<<\/Type /Pages"),kt="/Kids [",n=0;n<nt;n++)kt+=3+2*n+" 0 R ";o(kt+"]");o("/Count "+nt);o("/MediaBox [0 0 "+h(ti)+" "+h(ii)+"]");o(">>");o("endobj")},vi=function(n){n.objectNumber=tt();o("<<\/BaseFont/"+n.PostScriptName+"/Type/Font");typeof n.encoding=="string"&&o("/Encoding/"+n.encoding);o("/Subtype/Type1>>");o("endobj")},yi=function(){for(var n in a)a.hasOwnProperty(n)&&vi(a[n])},pi=function(){k.publish("putXobjectDict")},wi=function(){o("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");o("/Font <<");for(var n in a)a.hasOwnProperty(n)&&o("/"+n+" "+a[n].objectNumber+" 0 R");o(">>");o("/XObject <<");pi();o(">>")},bi=function(){yi();k.publish("putResources");ut[2]=it;o("2 0 obj");o("<<");wi();o(">>");o("endobj");k.publish("postPutResources")},ri=function(n,t,i){var r;d[t]===r&&(d[t]={});d[t][i]=n},ki=function(n,i,r,u){var f="F"+(t(a)+1).toString(10),e=a[f]={id:f,PostScriptName:n,fontName:i,fontStyle:r,encoding:u,metadata:{}};return ri(f,i,r),k.publish("addFont",e),f},di=function(){for(var i="helvetica",r="times",u="courier",f="normal",e="bold",o="italic",s="bolditalic",t=[["Helvetica",i,f],["Helvetica-Bold",i,e],["Helvetica-Oblique",i,o],["Helvetica-BoldOblique",i,s],["Courier",u,f],["Courier-Bold",u,e],["Courier-Oblique",u,o],["Courier-BoldOblique",u,s],["Times-Roman",r,f],["Times-Bold",r,e],["Times-Italic",r,o],["Times-BoldItalic",r,s]],l,h,n=0,c=t.length;n<c;n++)l=ki(t[n][0],t[n][1],t[n][2],"StandardEncoding"),h=t[n][0].split("-"),ri(l,h[0],h[1]||"");k.publish("addFonts",{fonts:a,dictionary:d})},gi=function(n,t){var i,s,l,e,h,r,u,o,f,c;if(t===l&&(t={}),e=t.sourceEncoding?e:"Unicode",r=t.outputEncoding,(t.autoencode||r)&&a[p].metadata&&a[p].metadata[e]&&a[p].metadata[e].encoding&&(h=a[p].metadata[e].encoding,!r&&a[p].encoding&&(r=a[p].encoding),!r&&h.codePages&&(r=h.codePages[0]),typeof r=="string"&&(r=h[r]),r)){for(o=!1,u=[],i=0,s=n.length;i<s;i++)f=r[n.charCodeAt(i)],f?u.push(String.fromCharCode(f)):u.push(n[i]),u[i].charCodeAt(0)>>8&&(o=!0);n=u.join("")}for(i=n.length;o===l&&i!==0;)n.charCodeAt(i-1)>>8&&(o=!0),i--;if(o){for(u=t.noBOM?[]:[254,255],i=0,s=n.length;i<s;i++){if(f=n.charCodeAt(i),c=f>>8,c>>8)throw new Error("Character at position "+i.toString(10)+" of string '"+n+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");u.push(c);u.push(f-(c<<8))}return String.fromCharCode.apply(l,u)}return n},g=function(n,t){return gi(n,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nr=function(){o("/Producer (jsPDF "+ei+")");y.title&&o("/Title ("+g(y.title)+")");y.subject&&o("/Subject ("+g(y.subject)+")");y.author&&o("/Author ("+g(y.author)+")");y.keywords&&o("/Keywords ("+g(y.keywords)+")");y.creator&&o("/Creator ("+g(y.creator)+")");var n=new Date;o("/CreationDate (D:"+[n.getFullYear(),ot(n.getMonth()+1),ot(n.getDate()),ot(n.getHours()),ot(n.getMinutes()),ot(n.getSeconds())].join("")+")")},tr=function(){o("/Type /Catalog");o("/Pages 1 0 R");o("/OpenAction [3 0 R /FitH null]");o("/PageLayout /OneColumn");k.publish("putCatalog")},ir=function(){o("/Size "+(w+1));o("/Root "+w+" 0 R");o("/Info "+(w-1)+" 0 R")},rr=function(){nt++;ht=!0;rt[nt]=[]},ui=function(){rr();o(h(ci*s)+" w");o(hi);wt!==0&&o(wt.toString(10)+" J");bt!==0&&o(bt.toString(10)+" j");k.publish("addPage",{pageNumber:nt})},dt=function(n,t){var i,r;n===r&&(n=a[p].fontName);t===r&&(t=a[p].fontStyle);try{i=d[n][t]}catch(u){i=r}if(!i)throw new Error("Unable to look up font label for font '"+n+"', '"+t+"'. Refer to getFontList() for available fonts.");return i},st=function(){ht=!1;vt=[];ut=[];o("%PDF-"+si);ai();bi();tt();o("<<");nr();o(">>");o("endobj");tt();o("<<");tr();o(">>");o("endobj");var t=it,n;for(o("xref"),o("0 "+(w+1)),o("0000000000 65535 f "),n=1;n<=w;n++)o(li(ut[n])+" 00000 n ");return o("trailer"),o("<<"),ir(),o(">>"),o("startxref"),o(t),o("%%EOF"),ht=!0,vt.join("\n")},lt=function(n){var t="S";return n==="F"?t="f":(n==="FD"||n==="DF")&&(t="B"),t},fi=function(n,t){var o,r,u,f,i,e;switch(n){case o:return st();case"save":if(navigator.getUserMedia&&(window.URL===undefined||window.URL.createObjectURL===undefined))return l.output("dataurlnewwindow");for(r=st(),u=r.length,f=new Uint8Array(new ArrayBuffer(u)),i=0;i<u;i++)f[i]=r.charCodeAt(i);e=new Blob([f],{type:"application/pdf"});saveAs(e,t);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(st());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(st());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(st()));break;default:throw new Error('Output type "'+n+'" is not supported.');}};if(u==="pt")s=1;else if(u==="mm")s=72/25.4;else if(u==="cm")s=72/2.54;else if(u==="in")s=72;else throw"Invalid unit: "+u;if(yt.hasOwnProperty(at))c=yt[at][1]/s,b=yt[at][0]/s;else try{c=f[1];b=f[0]}catch(ur){throw"Invalid format: "+f;}if(r==="p"||r==="portrait")r="p",b>c&&(ct=b,b=c,c=ct);else if(r==="l"||r==="landscape")r="l",c>b&&(ct=b,b=c,c=ct);else throw"Invalid orientation: "+r;l.internal={pdfEscape:g,getStyle:lt,getFont:function(){return a[dt.apply(l,arguments)]},getFontSize:function(){return ft},getLineHeight:function(){return ft*gt},btoa:btoa,write:function(n){o(arguments.length===1?n:Array.prototype.join.call(arguments," "))},getCoordinateString:function(n){return h(n*s)},getVerticalCoordinateString:function(n){return h((c-n)*s)},collections:{},newObject:tt,putStream:ni,events:k,scaleFactor:s,pageSize:{width:b,height:c},output:function(n,t){return fi(n,t)},getNumberOfPages:function(){return rt.length-1},pages:rt};l.addPage=function(){return ui(),this};l.text=function(n,t,i,r){var l,a,v,y,u,e,f;if(typeof n=="number"&&(a=i,v=n,y=t,n=a,t=v,i=y),typeof n=="string"&&n.match(/[\n\r]/)&&(n=n.split(/\r\n|\r|\n/g)),typeof r=="undefined"?r={noBOM:!0,autoencode:!0}:(r.noBOM===l&&(r.noBOM=!0),r.autoencode===l&&(r.autoencode=!0)),typeof n=="string")e=g(n,r);else if(n instanceof Array){for(u=n.concat(),f=u.length-1;f!==-1;f--)u[f]=g(u[f],r);e=u.join(") Tj\nT* (")}else throw new Error('Type of text must be string or Array. "'+n+'" is not recognized.');return o("BT\n/"+p+" "+ft+" Tf\n"+ft*gt+" TL\n"+pt+"\n"+h(t*s)+" "+h((c-i)*s)+" Td\n("+e+") Tj\nET"),this};l.line=function(n,t,i,r){return o(h(n*s)+" "+h((c-t)*s)+" m "+h(i*s)+" "+h((c-r)*s)+" l S"),this};l.lines=function(n,t,i,r,u,f){var rt,w,b,k,a,y,p,d,e,g,nt,tt,it,h,l;for(typeof n=="number"&&(w=i,b=n,k=t,n=w,t=b,i=k),u=lt(u),r=r===rt?[1,1]:r,o(v(t*s)+" "+v((c-i)*s)+" m "),a=r[0],y=r[1],d=n.length,h=t,l=i,p=0;p<d;p++)e=n[p],e.length===2?(h=e[0]*a+h,l=e[1]*y+l,o(v(h*s)+" "+v((c-l)*s)+" l")):(g=e[0]*a+h,nt=e[1]*y+l,tt=e[2]*a+h,it=e[3]*y+l,h=e[4]*a+h,l=e[5]*y+l,o(v(g*s)+" "+v((c-nt)*s)+" "+v(tt*s)+" "+v((c-it)*s)+" "+v(h*s)+" "+v((c-l)*s)+" c"));return f==!0&&o(" h"),o(u),this};l.rect=function(n,t,i,r,u){var f=lt(u);return o([h(n*s),h((c-t)*s),h(i*s),h(-r*s),"re",f].join(" ")),this};l.triangle=function(n,t,i,r,u,f,e){return this.lines([[i-n,r-t],[u-i,f-r],[n-u,t-f]],n,t,[1,1],e,!0),this};l.roundedRect=function(n,t,i,r,u,f,e){var o=4/3*(Math.SQRT2-1);return this.lines([[i-2*u,0],[u*o,0,u,f-f*o,u,f],[0,r-2*f],[0,f*o,-(u*o),f,-u,f],[-i+2*u,0],[-(u*o),0,-u,-(f*o),-u,-f],[0,-r+2*f],[0,-(f*o),u*o,-f,u,-f]],n+u,t,[1,1],e),this};l.ellipse=function(n,t,i,r,u){var l=lt(u),f=4/3*(Math.SQRT2-1)*i,e=4/3*(Math.SQRT2-1)*r;return o([h((n+i)*s),h((c-t)*s),"m",h((n+i)*s),h((c-(t-e))*s),h((n+f)*s),h((c-(t-r))*s),h(n*s),h((c-(t-r))*s),"c"].join(" ")),o([h((n-f)*s),h((c-(t-r))*s),h((n-i)*s),h((c-(t-e))*s),h((n-i)*s),h((c-t)*s),"c"].join(" ")),o([h((n-i)*s),h((c-(t+e))*s),h((n-f)*s),h((c-(t+r))*s),h(n*s),h((c-(t+r))*s),"c"].join(" ")),o([h((n+f)*s),h((c-(t+r))*s),h((n+i)*s),h((c-(t+e))*s),h((n+i)*s),h((c-t)*s),"c",l].join(" ")),this};l.circle=function(n,t,i,r){return this.ellipse(n,t,i,i,r)};l.setProperties=function(n){for(var t in y)y.hasOwnProperty(t)&&n[t]&&(y[t]=n[t]);return this};l.setFontSize=function(n){return ft=n,this};l.setFont=function(n,t){return p=dt(n,t),this};l.setFontStyle=l.setFontType=function(n){var t;return p=dt(t,n),this};l.getFontList=function(){var i={},n,t,r;for(n in d)if(d.hasOwnProperty(n)){i[n]=r=[];for(t in d[n])d[n].hasOwnProperty(t)&&r.push(t)}return i};l.setLineWidth=function(n){return o((n*s).toFixed(2)+" w"),this};l.setDrawColor=function(n,t,i,r){var u;return u=t===undefined||r===undefined&&n===t===i?typeof n=="string"?n+" G":h(n/255)+" G":r===undefined?typeof n=="string"?[n,t,i,"RG"].join(" "):[h(n/255),h(t/255),h(i/255),"RG"].join(" "):typeof n=="string"?[n,t,i,r,"K"].join(" "):[h(n),h(t),h(i),h(r),"K"].join(" "),o(u),this};l.setFillColor=function(n,t,i,r){var u;return u=t===undefined||r===undefined&&n===t===i?typeof n=="string"?n+" g":h(n/255)+" g":r===undefined?typeof n=="string"?[n,t,i,"rg"].join(" "):[h(n/255),h(t/255),h(i/255),"rg"].join(" "):typeof n=="string"?[n,t,i,r,"k"].join(" "):[h(n),h(t),h(i),h(r),"k"].join(" "),o(u),this};l.setTextColor=function(n,t,i){var u,r;return typeof n=="string"&&/#[0-9A-Fa-f]{6}/.test(n)&&(u=n.replace("#",""),r=parseInt(u,16),n=r>>16&255,t=r>>8&255,i=r&255),pt=n===0&&t===0&&i===0||typeof t=="undefined"?v(n/255)+" g":[v(n/255),v(t/255),v(i/255),"rg"].join(" "),this};l.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};l.setLineCap=function(n){var t=this.CapJoinStyles[n];if(t===undefined)throw new Error("Line cap style of '"+n+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wt=t,o(t.toString(10)+" J"),this};l.setLineJoin=function(n){var t=this.CapJoinStyles[n];if(t===undefined)throw new Error("Line join style of '"+n+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bt=t,o(t.toString(10)+" j"),this};l.output=fi;l.save=function(n){l.output("save",n)};for(et in n.API)n.API.hasOwnProperty(et)&&(et==="events"&&n.API.events.length?!function(n,t){for(var u,r,i=t.length-1;i!==-1;i--)u=t[i][0],r=t[i][1],n.subscribe.apply(n,[u].concat(typeof r=="function"?[r]:r))}(k,n.API.events):l[et]=n.API[et]);return di(),p="F1",ui(),k.publish("initialized"),l}typeof btoa=="undefined"&&(window.btoa=function(n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),e,o,s,h,c,l,a,t,r=0,y=0,f="",v=[],u;do e=n.charCodeAt(r++),o=n.charCodeAt(r++),s=n.charCodeAt(r++),t=e<<16|o<<8|s,h=t>>18&63,c=t>>12&63,l=t>>6&63,a=t&63,v[y++]=i[h]+i[c]+i[l]+i[a];while(r<n.length);return f=v.join(""),u=n.length%3,(u?f.slice(0,u-3):f)+"===".slice(u||3)});typeof atob=="undefined"&&(window.atob=function(n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r,f,s,h,c,e,o,u,t=0,a=0,l=[];if(!n)return n;n+="";do h=i.indexOf(n.charAt(t++)),c=i.indexOf(n.charAt(t++)),e=i.indexOf(n.charAt(t++)),o=i.indexOf(n.charAt(t++)),u=h<<18|c<<12|e<<6|o,r=u>>16&255,f=u>>8&255,s=u&255,l[a++]=e===64?String.fromCharCode(r):o===64?String.fromCharCode(r,f):String.fromCharCode(r,f,s);while(t<n.length);return l.join("")});var t=typeof Object.keys=="function"?function(n){return Object.keys(n).length}:function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t},i=function(n){this.topics={};this.context=n;this.publish=function(n,t){if(this.topics[n]){var f=this.topics[n],e=[],o,i,r,u,s=function(){};for(t=Array.prototype.slice.call(arguments,1),i=0,r=f.length;i<r;i++)u=f[i],o=u[0],u[1]&&(u[0]=s,e.push(i)),o.apply(this.context,t);for(i=0,r=e.length;i<r;i++)f.splice(e[i],1)}};this.subscribe=function(n,t,i){return this.topics[n]?this.topics[n].push([t,i]):this.topics[n]=[[t,i]],{topic:n,callback:t}};this.unsubscribe=function(n){if(this.topics[n.topic])for(var i=this.topics[n.topic],t=0,r=i.length;t<r;t++)i[t][0]===n.callback&&i.splice(t,1)}};return n.API={events:[]},n}();

/** @preserve 
jsPDF addImage plugin (JPEG only at this time)
Copyright (c) 2012 https://github.com/siefkenj/
*/

/**
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
!function(n){var t="addImage_",i=function(n){var i,r;if(!1||!n.charCodeAt(6)==="J".charCodeAt(0)||!n.charCodeAt(7)==="F".charCodeAt(0)||!n.charCodeAt(8)==="I".charCodeAt(0)||!n.charCodeAt(9)==="F".charCodeAt(0)||!1)throw new Error("getJpegSize requires a binary jpeg file");for(var u=n.charCodeAt(4)*256+n.charCodeAt(5),t=4,f=n.length;t<f;){if(t+=u,n.charCodeAt(t)!==255)throw new Error("getJpegSize could not find the size of the image");if(n.charCodeAt(t+1)===192||n.charCodeAt(t+1)===193||n.charCodeAt(t+1)===194||n.charCodeAt(t+1)===195||n.charCodeAt(t+1)===196||n.charCodeAt(t+1)===197||n.charCodeAt(t+1)===198||n.charCodeAt(t+1)===199)return r=n.charCodeAt(t+5)*256+n.charCodeAt(t+6),i=n.charCodeAt(t+7)*256+n.charCodeAt(t+8),[i,r];t+=2;u=n.charCodeAt(t)*256+n.charCodeAt(t+1)}},r=function(n){var u=this.internal.newObject(),t=this.internal.write,f=this.internal.putStream,r,i;if(n.n=u,t("<<\/Type /XObject"),t("/Subtype /Image"),t("/Width "+n.w),t("/Height "+n.h),n.cs==="Indexed"?t("/ColorSpace [/Indexed /DeviceRGB "+(n.pal.length/3-1)+" "+(u+1)+" 0 R]"):(t("/ColorSpace /"+n.cs),n.cs==="DeviceCMYK"&&t("/Decode [1 0 1 0 1 0 1 0]")),t("/BitsPerComponent "+n.bpc),"f"in n&&t("/Filter /"+n.f),"dp"in n&&t("/DecodeParms <<"+n.dp+">>"),"trns"in n&&n.trns.constructor==Array)for(r="",i=0;i<n.trns.length;i++)r+=n[r][i]+" "+n.trns[i]+" ",t("/Mask ["+r+"]");"smask"in n&&t("/SMask "+(u+1)+" 0 R");t("/Length "+n.data.length+">>");f(n.data);t("endobj")},u=function(){var n=this.internal.collections[t+"images"];for(var i in n)r.call(this,n[i])},f=function(){var i=this.internal.collections[t+"images"],r=this.internal.write,n;for(var u in i)n=i[u],r("/I"+n.i,n.n,"0","R")};n.addImage=function(n,r,e,o,s,h){var l,y,w,c;if(typeof n=="object"&&n.nodeType===1){if(l=document.createElement("canvas"),l.width=n.clientWidth,l.height=n.clientHeight,y=l.getContext("2d"),!y)throw"addImage requires canvas to be supported by browser.";y.drawImage(n,0,0,l.width,l.height);n=l.toDataURL("image/jpeg");r="JPEG"}if(r.toUpperCase()!=="JPEG")throw new Error("addImage currently only supports format 'JPEG', not '"+r+"'");var v,a=this.internal.collections[t+"images"],p=this.internal.getCoordinateString,b=this.internal.getVerticalCoordinateString;return n.substring(0,23)==="data:image/jpeg;base64,"&&(n=atob(n.replace("data:image/jpeg;base64,",""))),a?v=Object.keys?Object.keys(a).length:function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t}(a):(v=0,this.internal.collections[t+"images"]=a={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",f)),w=i(n),c={w:w[0],h:w[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:v,data:n},a[v]=c,s||h||(s=-96,h=-96),s<0&&(s=-72*c.w/s/this.internal.scaleFactor),h<0&&(h=-72*c.h/h/this.internal.scaleFactor),s===0&&(s=h*c.w/c.h),h===0&&(h=s*c.h/c.w),this.internal.write("q",p(s),"0 0",p(h),p(e),b(o+h),"cm /I"+c.i,"Do Q"),this}}(jsPDF.API);